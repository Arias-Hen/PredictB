<head>
    <div class="container-fluid">
        <!-- Botón Toggle -->
        <button class="btn btn-primary position-fixed start-0 mt-3 ms-3" id="sidebarToggle" type="button"
            style="z-index: 1060;" aria-label="Toggle navigation">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-list"
                viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z" />
            </svg>
        </button>

        <!-- Sidebar -->
        <div class="sidebar position-fixed start-0 top-0 h-100 bg-primary" id="sidebar"
            style="width: 250px; z-index: 1050; transform: translateX(-100%);transition: transform 0.3s ease-in-out;">
            <!-- Encabezado -->
            <div class="sidebar-header bg-primary-dark p-3 text-center">
                <h5 class="text-white mb-1">{{ user_nombre }}</h5>
                <small class="text-white-50">hola@unsitiogenial.es</small>
            </div>
            <!-- Menú -->
            <nav class="sidebar-menu p-3 text-white-50" aria-label="Main navigation">
                <div class="d-flex flex-column gap-3 text-white-50">
                    <a href="\home\valoraciones"
                        class="sidebar-link btn-hover text-white text-decoration-none py-2 px-3 rounded">
                        <span class="ms-2">VALORACIONES</span>
                    </a>
                    <a href="\home\ventas"
                        class="sidebar-link btn-hover text-white text-decoration-none py-2 px-3 rounded">
                        <span class="ms-2">REGISTROS</span>
                    </a>
                    <a href="\home\informes"
                        class="sidebar-link btn-hover text-white text-decoration-none py-2 px-3 rounded">
                        <span class="ms-2">INFORMES</span>
                    </a>
                    <a href="#" class="sidebar-link btn-hover text-white text-decoration-none py-2 px-3 rounded">
                        <span class="ms-2">GENERAR INFORME</span>
                    </a>
                </div>
            </nav>
        </div>
    </div>

</head>

<body>
    {% block content %}
    {% endblock %}
</body>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const sidebar = document.getElementById("sidebar");
        const sidebarToggle = document.getElementById("sidebarToggle");
        const mainContent = document.getElementById("mainContent");
        let sidebarVisible = false;

        sidebarToggle.addEventListener("click", function () {
            sidebarVisible = !sidebarVisible;

            // Mostrar u ocultar el sidebar
            sidebar.style.transform = sidebarVisible ? "translateX(0)" : "translateX(-100%)";

            // Si estás en escritorio, cambia el margen. En móvil, no.
            if (window.innerWidth >= 992) {
                mainContent.style.marginLeft = sidebarVisible ? "250px" : "0";
            }

            // Móvil: overlay para cerrar tocando fuera
            let overlay = document.querySelector(".sidebar-overlay");
            if (sidebarVisible && window.innerWidth < 992) {
                overlay = document.createElement("div");
                overlay.className = "sidebar-overlay";
                overlay.onclick = function () {
                    sidebarVisible = false;
                    sidebar.style.transform = "translateX(-100%)";
                    overlay.remove();
                };
                document.body.appendChild(overlay);
            } else {
                overlay?.remove();
            }
        });
    });
</script>

<style>
    .sidebar {
        width: 250px;
        transition: transform 0.3s ease-in-out;
        z-index: 1030;
    }

    .btn-hover:hover {
        background: rgba(255, 255, 255, 0.1) !important;
        transform: translateX(5px);
    }

    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1041;
    }

    .menu-toggle {
        background: none;
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        margin-right: 1rem;
    }

    .menu-button {
        background-color: #001f9c;
        color: white;
        border: 1px solid white;
        padding: 0.3rem 0.8rem;
        border-radius: 4px;
    }
</style>